{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/aaronbaker/knearme-workspace/review-agent-dashboard/src/lib/exports/reader.ts"],"sourcesContent":["import { promises as fs } from 'fs'\nimport path from 'path'\n\n/**\n * Export file reader for contractor-review-agent JSON exports\n *\n * Reads JSON export files from the configured output directory.\n * Default: ../contractor-review-agent/output\n *\n * @see /Users/aaronbaker/knearme-workspace/contractor-review-agent/src/scripts/sync.ts\n */\n\nexport interface ExportFile {\n  filename: string\n  timestamp: Date\n  size: number\n}\n\nexport type SerializedExportFile = Omit<ExportFile, 'timestamp'> & {\n  timestamp: string\n}\n\nexport interface ExportData {\n  exportedAt: string\n  version: string\n  counts: {\n    contractors: number\n    reviews: number\n    analyses: number\n    articles: number\n  }\n  data: {\n    contractors: unknown[]\n    reviews: unknown[]\n    analyses: unknown[]\n    articles: unknown[]\n  }\n}\n\n/**\n * Get the export directory path from environment or default\n */\nfunction getExportDir(): string {\n  return process.env.CONTRACTOR_REVIEW_AGENT_OUTPUT_DIR\n    || path.join(process.cwd(), '..', 'contractor-review-agent', 'output')\n}\n\n/**\n * Parse timestamp from export filename\n * Format: export-YYYY-MM-DDTHH-MM-SS.json\n */\nfunction parseTimestampFromFilename(filename: string): Date | null {\n  const match = filename.match(/export-(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2})-(\\d{2})-(\\d{2})\\.json/)\n  if (!match) return null\n\n  const [, year, month, day, hour, minute, second] = match\n  return new Date(\n    parseInt(year),\n    parseInt(month) - 1,\n    parseInt(day),\n    parseInt(hour),\n    parseInt(minute),\n    parseInt(second)\n  )\n}\n\n/**\n * List all export files in the output directory\n * Returns files sorted by timestamp (newest first)\n */\nexport async function listExportFiles(): Promise<ExportFile[]> {\n  const exportDir = getExportDir()\n\n  try {\n    const files = await fs.readdir(exportDir)\n    const exportFiles: ExportFile[] = []\n\n    for (const filename of files) {\n      // Only include export-*.json files (combined exports)\n      if (!filename.startsWith('export-') || !filename.endsWith('.json')) {\n        continue\n      }\n\n      const filepath = path.join(exportDir, filename)\n      const stats = await fs.stat(filepath)\n      const timestamp = parseTimestampFromFilename(filename)\n\n      if (timestamp) {\n        exportFiles.push({\n          filename,\n          timestamp,\n          size: stats.size,\n        })\n      }\n    }\n\n    // Sort by timestamp, newest first\n    exportFiles.sort((a, b) => b.timestamp.getTime() - a.timestamp.getTime())\n\n    return exportFiles\n  } catch (error) {\n    // Directory doesn't exist or can't be read\n    console.error('Failed to list export files:', error)\n    return []\n  }\n}\n\n/**\n * Read and parse a specific export file\n */\nexport async function readExportFile(filename: string): Promise<ExportData | null> {\n  const exportDir = getExportDir()\n  const filepath = path.join(exportDir, filename)\n\n  try {\n    const content = await fs.readFile(filepath, 'utf-8')\n    const data = JSON.parse(content) as ExportData\n    return data\n  } catch (error) {\n    console.error(`Failed to read export file ${filename}:`, error)\n    return null\n  }\n}\n\n/**\n * Get the most recent export file\n */\nexport async function getLatestExport(): Promise<{ file: ExportFile; data: ExportData } | null> {\n  const files = await listExportFiles()\n  if (files.length === 0) return null\n\n  const latestFile = files[0]\n  const data = await readExportFile(latestFile.filename)\n  if (!data) return null\n\n  return { file: latestFile, data }\n}\n\n/**\n * Format file size in human-readable format\n */\nexport function formatFileSize(bytes: number): string {\n  if (bytes < 1024) return `${bytes} B`\n  if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`\n  return `${(bytes / (1024 * 1024)).toFixed(1)} MB`\n}\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;;;AAsCA;;CAEC,GACD,SAAS;IACP,OAAO,QAAQ,GAAG,CAAC,kCAAkC,IAChD,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,MAAM,2BAA2B;AACjE;AAEA;;;CAGC,GACD,SAAS,2BAA2B,QAAgB;IAClD,MAAM,QAAQ,SAAS,KAAK,CAAC;IAC7B,IAAI,CAAC,OAAO,OAAO;IAEnB,MAAM,GAAG,MAAM,OAAO,KAAK,MAAM,QAAQ,OAAO,GAAG;IACnD,OAAO,IAAI,KACT,SAAS,OACT,SAAS,SAAS,GAClB,SAAS,MACT,SAAS,OACT,SAAS,SACT,SAAS;AAEb;AAMO,eAAe;IACpB,MAAM,YAAY;IAElB,IAAI;QACF,MAAM,QAAQ,MAAM,yGAAE,CAAC,OAAO,CAAC;QAC/B,MAAM,cAA4B,EAAE;QAEpC,KAAK,MAAM,YAAY,MAAO;YAC5B,sDAAsD;YACtD,IAAI,CAAC,SAAS,UAAU,CAAC,cAAc,CAAC,SAAS,QAAQ,CAAC,UAAU;gBAClE;YACF;YAEA,MAAM,WAAW,4GAAI,CAAC,IAAI,CAAC,WAAW;YACtC,MAAM,QAAQ,MAAM,yGAAE,CAAC,IAAI,CAAC;YAC5B,MAAM,YAAY,2BAA2B;YAE7C,IAAI,WAAW;gBACb,YAAY,IAAI,CAAC;oBACf;oBACA;oBACA,MAAM,MAAM,IAAI;gBAClB;YACF;QACF;QAEA,kCAAkC;QAClC,YAAY,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,SAAS,CAAC,OAAO,KAAK,EAAE,SAAS,CAAC,OAAO;QAEtE,OAAO;IACT,EAAE,OAAO,OAAO;QACd,2CAA2C;QAC3C,QAAQ,KAAK,CAAC,gCAAgC;QAC9C,OAAO,EAAE;IACX;AACF;AAKO,eAAe,eAAe,QAAgB;IACnD,MAAM,YAAY;IAClB,MAAM,WAAW,4GAAI,CAAC,IAAI,CAAC,WAAW;IAEtC,IAAI;QACF,MAAM,UAAU,MAAM,yGAAE,CAAC,QAAQ,CAAC,UAAU;QAC5C,MAAM,OAAO,KAAK,KAAK,CAAC;QACxB,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,CAAC,2BAA2B,EAAE,SAAS,CAAC,CAAC,EAAE;QACzD,OAAO;IACT;AACF;AAKO,eAAe;IACpB,MAAM,QAAQ,MAAM;IACpB,IAAI,MAAM,MAAM,KAAK,GAAG,OAAO;IAE/B,MAAM,aAAa,KAAK,CAAC,EAAE;IAC3B,MAAM,OAAO,MAAM,eAAe,WAAW,QAAQ;IACrD,IAAI,CAAC,MAAM,OAAO;IAElB,OAAO;QAAE,MAAM;QAAY;IAAK;AAClC;AAKO,SAAS,eAAe,KAAa;IAC1C,IAAI,QAAQ,MAAM,OAAO,GAAG,MAAM,EAAE,CAAC;IACrC,IAAI,QAAQ,OAAO,MAAM,OAAO,GAAG,CAAC,QAAQ,IAAI,EAAE,OAAO,CAAC,GAAG,GAAG,CAAC;IACjE,OAAO,GAAG,CAAC,QAAQ,CAAC,OAAO,IAAI,CAAC,EAAE,OAAO,CAAC,GAAG,GAAG,CAAC;AACnD"}},
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":["file:///Users/aaronbaker/knearme-workspace/review-agent-dashboard/src/components/exports/ExportViewer.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/exports/ExportViewer.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/exports/ExportViewer.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA2S,GACxU,yEACA","ignoreList":[0]}},
    {"offset": {"line": 132, "column": 0}, "map": {"version":3,"sources":["file:///Users/aaronbaker/knearme-workspace/review-agent-dashboard/src/components/exports/ExportViewer.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/exports/ExportViewer.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/exports/ExportViewer.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAuR,GACpT,qDACA","ignoreList":[0]}},
    {"offset": {"line": 146, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 154, "column": 0}, "map": {"version":3,"sources":["file:///Users/aaronbaker/knearme-workspace/review-agent-dashboard/src/components/dashboard/PageHeader.tsx"],"sourcesContent":["import type { LucideIcon } from 'lucide-react'\nimport { Database } from 'lucide-react'\n\n/**\n * PageHeader - Mission Control style page header\n *\n * Consistent header pattern with icon, title, optional status badge,\n * subtitle, and database table reference.\n *\n * @example\n * <PageHeader\n *   title=\"Search History\"\n *   subtitle=\"Google Maps discovery operations\"\n *   icon={Activity}\n *   badge=\"Live\"\n *   badgeColor=\"emerald\"\n *   recordCount={1234}\n *   tableName=\"searched_cities\"\n * />\n */\n\ntype BadgeColor = 'emerald' | 'amber' | 'cyan' | 'violet' | 'red' | 'blue'\n\ninterface PageHeaderProps {\n  title: string\n  subtitle?: string\n  icon?: LucideIcon\n  /** Optional status badge text (e.g., \"Live\", \"Beta\") */\n  badge?: string\n  badgeColor?: BadgeColor\n  /** Total record count to display */\n  recordCount?: number\n  /** Database table name for reference badge */\n  tableName?: string\n  /** Right-side content slot */\n  actions?: React.ReactNode\n}\n\nconst badgeColors: Record<BadgeColor, string> = {\n  emerald: 'text-emerald-400 bg-emerald-500/10 border-emerald-500/20',\n  amber: 'text-amber-400 bg-amber-500/10 border-amber-500/20',\n  cyan: 'text-cyan-400 bg-cyan-500/10 border-cyan-500/20',\n  violet: 'text-violet-400 bg-violet-500/10 border-violet-500/20',\n  red: 'text-red-400 bg-red-500/10 border-red-500/20',\n  blue: 'text-blue-400 bg-blue-500/10 border-blue-500/20',\n}\n\nexport function PageHeader({\n  title,\n  subtitle,\n  icon: Icon,\n  badge,\n  badgeColor = 'emerald',\n  recordCount,\n  tableName,\n  actions,\n}: PageHeaderProps) {\n  return (\n    <div className=\"flex items-start justify-between\">\n      <div>\n        <div className=\"flex items-center gap-3 mb-1\">\n          <div className=\"flex items-center gap-2\">\n            {Icon && <Icon className=\"h-5 w-5 text-emerald-400\" />}\n            <h1 className=\"text-2xl font-bold text-zinc-100 tracking-tight\">\n              {title}\n            </h1>\n          </div>\n          {badge && (\n            <span\n              className={`px-2 py-0.5 text-[10px] font-mono uppercase tracking-widest border rounded ${badgeColors[badgeColor]}`}\n            >\n              {badge}\n            </span>\n          )}\n        </div>\n        {(subtitle || recordCount !== undefined) && (\n          <p className=\"text-sm text-zinc-500 font-mono\">\n            {subtitle}\n            {subtitle && recordCount !== undefined && ' \\u00B7 '}\n            {recordCount !== undefined && `${recordCount.toLocaleString()} records`}\n          </p>\n        )}\n      </div>\n\n      <div className=\"flex items-center gap-3\">\n        {actions}\n        {tableName && (\n          <div className=\"flex items-center gap-2 px-3 py-1.5 bg-zinc-900/50 border border-zinc-800/50 rounded-lg\">\n            <Database className=\"h-4 w-4 text-zinc-500\" />\n            <span className=\"text-xs font-mono text-zinc-500\">{tableName}</span>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AACA;;;AAqCA,MAAM,cAA0C;IAC9C,SAAS;IACT,OAAO;IACP,MAAM;IACN,QAAQ;IACR,KAAK;IACL,MAAM;AACR;AAEO,SAAS,WAAW,EACzB,KAAK,EACL,QAAQ,EACR,MAAM,IAAI,EACV,KAAK,EACL,aAAa,SAAS,EACtB,WAAW,EACX,SAAS,EACT,OAAO,EACS;IAChB,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;;kCACC,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;oCACZ,sBAAQ,8OAAC;wCAAK,WAAU;;;;;;kDACzB,8OAAC;wCAAG,WAAU;kDACX;;;;;;;;;;;;4BAGJ,uBACC,8OAAC;gCACC,WAAW,CAAC,2EAA2E,EAAE,WAAW,CAAC,WAAW,EAAE;0CAEjH;;;;;;;;;;;;oBAIN,CAAC,YAAY,gBAAgB,SAAS,mBACrC,8OAAC;wBAAE,WAAU;;4BACV;4BACA,YAAY,gBAAgB,aAAa;4BACzC,gBAAgB,aAAa,GAAG,YAAY,cAAc,GAAG,QAAQ,CAAC;;;;;;;;;;;;;0BAK7E,8OAAC;gBAAI,WAAU;;oBACZ;oBACA,2BACC,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,sNAAQ;gCAAC,WAAU;;;;;;0CACpB,8OAAC;gCAAK,WAAU;0CAAmC;;;;;;;;;;;;;;;;;;;;;;;;AAM/D"}},
    {"offset": {"line": 280, "column": 0}, "map": {"version":3,"sources":["file:///Users/aaronbaker/knearme-workspace/review-agent-dashboard/src/app/exports/page.tsx"],"sourcesContent":["import { listExportFiles, readExportFile, type SerializedExportFile } from '@/lib/exports/reader'\nimport ExportViewer from '@/components/exports/ExportViewer'\nimport { PageHeader } from '@/components/dashboard/PageHeader'\nimport { FileJson, FolderOpen, Terminal, Download } from 'lucide-react'\n\n/**\n * Exports Viewer Page (Server Component)\n *\n * Fetches real export files from the contractor-review-agent output directory.\n * Uses CONTRACTOR_REVIEW_AGENT_OUTPUT_DIR environment variable.\n *\n * Design: Mission Control dark theme with terminal/code aesthetic\n * - File cards with terminal-style filename display\n * - Tabs for viewing different data sections\n * - Working download functionality\n *\n * @see /Users/aaronbaker/knearme-workspace/review-agent-dashboard/src/lib/exports/reader.ts\n */\n\nexport const dynamic = 'force-dynamic'\n\nexport default async function ExportsPage() {\n  // Fetch real export files from disk\n  const files = await listExportFiles()\n\n  // Pre-load the first export's data for immediate display\n  let initialData = null\n  if (files.length > 0) {\n    initialData = await readExportFile(files[0].filename)\n  }\n\n  // Serialize dates for client component (Next.js can't serialize Date objects)\n  const serializedFiles: SerializedExportFile[] = files.map((file) => ({\n    ...file,\n    timestamp: file.timestamp.toISOString(),\n  }))\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Page Header */}\n      <PageHeader\n        title=\"Exports\"\n        subtitle=\"View and download JSON exports from the review agent\"\n        icon={Download}\n        badge=\"Data\"\n        badgeColor=\"violet\"\n        recordCount={files.length}\n      />\n\n      {files.length === 0 ? (\n        /* Empty state - Mission Control styling */\n        <div className=\"rounded-lg bg-zinc-900/30 border border-zinc-800/50 p-12 text-center\">\n          <div className=\"inline-flex items-center justify-center h-16 w-16 rounded-full bg-zinc-800/50 border border-zinc-700/50 mb-4\">\n            <FolderOpen className=\"h-8 w-8 text-zinc-600\" />\n          </div>\n          <h3 className=\"text-lg font-semibold text-zinc-300 mb-1\">\n            No exports found\n          </h3>\n          <p className=\"text-sm text-zinc-500 max-w-md mx-auto mb-6\">\n            Export files will appear here when generated by the contractor-review-agent.\n          </p>\n\n          {/* Setup instructions - Terminal style */}\n          <div className=\"mt-6 rounded-lg bg-[#0d1117] border border-zinc-700/50 p-4 max-w-lg mx-auto text-left\">\n            <div className=\"flex items-center gap-2 mb-3 pb-3 border-b border-zinc-700/50\">\n              <div className=\"flex gap-1.5\">\n                <div className=\"w-3 h-3 rounded-full bg-[#ff5f56]\" />\n                <div className=\"w-3 h-3 rounded-full bg-[#ffbd2e]\" />\n                <div className=\"w-3 h-3 rounded-full bg-[#27c93f]\" />\n              </div>\n              <Terminal className=\"h-3 w-3 text-zinc-500 ml-2\" />\n              <span className=\"text-xs text-zinc-500 font-mono\">\n                Generate exports\n              </span>\n            </div>\n            <div className=\"space-y-2 text-xs font-mono\">\n              <div className=\"flex items-start gap-3\">\n                <span className=\"text-zinc-600 select-none w-4\">1.</span>\n                <code className=\"text-zinc-300\">\n                  <span className=\"text-cyan-400\">cd</span> contractor-review-agent\n                </code>\n              </div>\n              <div className=\"flex items-start gap-3\">\n                <span className=\"text-zinc-600 select-none w-4\">2.</span>\n                <code className=\"text-zinc-300\">\n                  <span className=\"text-cyan-400\">npm run</span> sync -- --export\n                </code>\n              </div>\n            </div>\n          </div>\n\n          {/* Environment variable hint */}\n          <div className=\"mt-6 flex items-center justify-center gap-2 text-xs text-zinc-600\">\n            <FileJson className=\"h-3 w-3\" />\n            <span>Looking in:</span>\n            <code className=\"px-2 py-1 rounded bg-zinc-800/50 border border-zinc-700/50 font-mono text-[10px] text-zinc-400\">\n              {process.env.CONTRACTOR_REVIEW_AGENT_OUTPUT_DIR ||\n                '../contractor-review-agent/output'}\n            </code>\n          </div>\n        </div>\n      ) : (\n        <ExportViewer\n          files={serializedFiles}\n          initialData={initialData}\n        />\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;;;;;;AAgBO,MAAM,UAAU;AAER,eAAe;IAC5B,oCAAoC;IACpC,MAAM,QAAQ,MAAM,IAAA,kJAAe;IAEnC,yDAAyD;IACzD,IAAI,cAAc;IAClB,IAAI,MAAM,MAAM,GAAG,GAAG;QACpB,cAAc,MAAM,IAAA,iJAAc,EAAC,KAAK,CAAC,EAAE,CAAC,QAAQ;IACtD;IAEA,8EAA8E;IAC9E,MAAM,kBAA0C,MAAM,GAAG,CAAC,CAAC,OAAS,CAAC;YACnE,GAAG,IAAI;YACP,WAAW,KAAK,SAAS,CAAC,WAAW;QACvC,CAAC;IAED,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC,2JAAU;gBACT,OAAM;gBACN,UAAS;gBACT,MAAM,sNAAQ;gBACd,OAAM;gBACN,YAAW;gBACX,aAAa,MAAM,MAAM;;;;;;YAG1B,MAAM,MAAM,KAAK,IAChB,yCAAyC,iBACzC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC,gOAAU;4BAAC,WAAU;;;;;;;;;;;kCAExB,8OAAC;wBAAG,WAAU;kCAA2C;;;;;;kCAGzD,8OAAC;wBAAE,WAAU;kCAA8C;;;;;;kCAK3D,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAI,WAAU;;;;;;0DACf,8OAAC;gDAAI,WAAU;;;;;;0DACf,8OAAC;gDAAI,WAAU;;;;;;;;;;;;kDAEjB,8OAAC,sNAAQ;wCAAC,WAAU;;;;;;kDACpB,8OAAC;wCAAK,WAAU;kDAAkC;;;;;;;;;;;;0CAIpD,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAK,WAAU;0DAAgC;;;;;;0DAChD,8OAAC;gDAAK,WAAU;;kEACd,8OAAC;wDAAK,WAAU;kEAAgB;;;;;;oDAAS;;;;;;;;;;;;;kDAG7C,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAK,WAAU;0DAAgC;;;;;;0DAChD,8OAAC;gDAAK,WAAU;;kEACd,8OAAC;wDAAK,WAAU;kEAAgB;;;;;;oDAAc;;;;;;;;;;;;;;;;;;;;;;;;;kCAOtD,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,4NAAQ;gCAAC,WAAU;;;;;;0CACpB,8OAAC;0CAAK;;;;;;0CACN,8OAAC;gCAAK,WAAU;0CACb,QAAQ,GAAG,CAAC,kCAAkC,IAC7C;;;;;;;;;;;;;;;;;qCAKR,8OAAC,wJAAY;gBACX,OAAO;gBACP,aAAa;;;;;;;;;;;;AAKvB"}}]
}