module.exports=[44211,a=>{"use strict";var b=a.i(7997),c=a.i(11070),d=a.i(77695),e=a.i(36361),f=a.i(74091),g=a.i(1269);let h=(0,g.default)("cpu",[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]]);var i=a.i(82604),j=a.i(93830);let k=(0,g.default)("arrow-right-left",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);var l=a.i(83627),m=a.i(95936),n=a.i(23878),o=a.i(93133),p=a.i(89606);function q(a){return a<.01?`$${a.toFixed(6)}`:a<1?`$${a.toFixed(4)}`:`$${a.toFixed(2)}`}function r(a){return a>=1e6?`${(a/1e6).toFixed(1)}M`:a>=1e3?`${(a/1e3).toFixed(1)}K`:a.toLocaleString()}function s({operation:a,count:c,tokens:d,cost:e,color:f}){return(0,b.jsxs)("div",{className:"flex items-center gap-4 rounded-lg bg-zinc-800/50 border border-zinc-700/50 p-4",children:[(0,b.jsx)("div",{className:`h-3 w-3 rounded-full ${f}`}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-zinc-200 capitalize",children:a}),(0,b.jsxs)("p",{className:"text-xs text-zinc-500 font-mono",children:[c.toLocaleString()," operations"]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-sm font-bold text-zinc-100 font-mono",children:q(e)}),(0,b.jsxs)("p",{className:"text-xs text-zinc-500 font-mono",children:[r(d)," tokens"]})]})]})}function t({totalInputTokens:a,totalOutputTokens:c,byOperation:d}){let e=a+c,f=e>0?a/e*100:50,g=e>0?c/e*100:50,h=[{name:"Analyze",...d.analyze,color:"bg-cyan-500"},{name:"Generate",...d.generate,color:"bg-violet-500"},{name:"Discover",...d.discover,color:"bg-emerald-500"}];return 0===e?(0,b.jsx)("div",{className:"flex h-32 items-center justify-center text-zinc-500 text-sm font-mono",children:"No token data available"}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs text-zinc-500 font-mono mb-2",children:[(0,b.jsx)("span",{children:"Input Tokens"}),(0,b.jsx)("span",{children:"Output Tokens"})]}),(0,b.jsxs)("div",{className:"h-8 rounded-lg overflow-hidden flex",children:[(0,b.jsx)("div",{className:"bg-cyan-500 flex items-center justify-center transition-all",style:{width:`${f}%`},children:(0,b.jsxs)("span",{className:"text-xs font-medium text-white px-2 truncate font-mono",children:[r(a)," (",f.toFixed(1),"%)"]})}),(0,b.jsx)("div",{className:"bg-violet-500 flex items-center justify-center transition-all",style:{width:`${g}%`},children:(0,b.jsxs)("span",{className:"text-xs font-medium text-white px-2 truncate font-mono",children:[r(c)," (",g.toFixed(1),"%)"]})})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4 mt-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,b.jsx)("div",{className:"h-2.5 w-2.5 rounded bg-cyan-500"}),(0,b.jsx)("span",{className:"text-xs text-zinc-500",children:"Input (prompts)"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,b.jsx)("div",{className:"h-2.5 w-2.5 rounded bg-violet-500"}),(0,b.jsx)("span",{className:"text-xs text-zinc-500",children:"Output (responses)"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("p",{className:"text-xs font-mono uppercase tracking-wider text-zinc-500",children:"By Operation"}),h.map(a=>{let c=a.inputTokens+a.outputTokens,d=c>0?a.inputTokens/c*100:50;return 0===c?null:(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,b.jsx)("span",{className:"text-zinc-200 font-medium",children:a.name}),(0,b.jsxs)("span",{className:"text-zinc-500 font-mono",children:[r(c)," total"]})]}),(0,b.jsxs)("div",{className:"h-4 rounded overflow-hidden flex bg-zinc-800",children:[(0,b.jsx)("div",{className:"bg-cyan-500/80",style:{width:`${d}%`},title:`Input: ${r(a.inputTokens)}`}),(0,b.jsx)("div",{className:"bg-violet-500/80",style:{width:`${100-d}%`},title:`Output: ${r(a.outputTokens)}`})]})]},a.name)})]})]})}function u({data:a}){if(0===a.length)return(0,b.jsx)("div",{className:"flex h-48 items-center justify-center text-zinc-500 font-mono",children:"No data available yet"});let c=Math.max(...a.map(a=>a.cost));return(0,b.jsx)("div",{className:"flex h-48 items-end gap-1",children:a.map(a=>{let d=c>0?a.cost/c*100:0,e=new Date(a.date).toLocaleDateString("en-US",{month:"short",day:"numeric"});return(0,b.jsxs)("div",{className:"group relative flex-1 flex flex-col items-center",children:[(0,b.jsx)("div",{className:"w-full rounded-t bg-amber-500/80 hover:bg-amber-500 transition-colors cursor-pointer",style:{height:`${Math.max(d,2)}%`},title:`${e}: ${q(a.cost)} (${a.operations} ops)`}),(0,b.jsx)("div",{className:"absolute bottom-full mb-2 hidden group-hover:block z-10",children:(0,b.jsxs)("div",{className:"rounded-lg bg-zinc-800 border border-zinc-700/50 p-2 shadow-lg text-xs whitespace-nowrap",children:[(0,b.jsx)("p",{className:"font-medium text-zinc-200",children:e}),(0,b.jsx)("p",{className:"text-zinc-400 font-mono",children:q(a.cost)}),(0,b.jsxs)("p",{className:"text-zinc-500 font-mono",children:[a.operations," ops"]})]})})]},a.date)})})}function v({models:a}){return 0===a.length?(0,b.jsx)("div",{className:"flex h-32 items-center justify-center text-zinc-500 font-mono",children:"No model data available"}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-sm",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-zinc-800/50",children:[(0,b.jsx)("th",{className:"px-3 py-2 text-left text-[10px] font-mono uppercase tracking-wider text-zinc-500",children:"Model"}),(0,b.jsx)("th",{className:"px-3 py-2 text-right text-[10px] font-mono uppercase tracking-wider text-zinc-500",children:"Ops"}),(0,b.jsx)("th",{className:"px-3 py-2 text-right text-[10px] font-mono uppercase tracking-wider text-zinc-500",children:"Tokens"}),(0,b.jsx)("th",{className:"px-3 py-2 text-right text-[10px] font-mono uppercase tracking-wider text-zinc-500",children:"Cost"}),(0,b.jsx)("th",{className:"px-3 py-2 text-right text-[10px] font-mono uppercase tracking-wider text-zinc-500",children:"Avg"}),(0,b.jsx)("th",{className:"px-3 py-2 text-right text-[10px] font-mono uppercase tracking-wider text-zinc-500",children:"Rate"})]})}),(0,b.jsx)("tbody",{children:a.map(a=>(0,b.jsxs)("tr",{className:"border-b border-zinc-800/30 hover:bg-zinc-800/30",children:[(0,b.jsx)("td",{className:"px-3 py-2 font-mono text-xs text-zinc-300 truncate max-w-[150px]",children:a.model}),(0,b.jsx)("td",{className:"px-3 py-2 text-right text-zinc-300 font-mono text-xs",children:a.totalOperations.toLocaleString()}),(0,b.jsx)("td",{className:"px-3 py-2 text-right text-zinc-300 font-mono text-xs",children:r(a.totalTokens)}),(0,b.jsx)("td",{className:"px-3 py-2 text-right text-zinc-300 font-mono text-xs",children:q(a.totalCost)}),(0,b.jsx)("td",{className:"px-3 py-2 text-right text-zinc-400 font-mono text-xs",children:a.avgDuration>0?`${(a.avgDuration/1e3).toFixed(1)}s`:"-"}),(0,b.jsx)("td",{className:"px-3 py-2 text-right",children:(0,b.jsxs)("span",{className:`inline-flex items-center gap-1 text-xs font-mono ${a.successRate>=95?"text-emerald-400":a.successRate>=80?"text-amber-400":"text-red-400"}`,children:[a.successRate>=95?(0,b.jsx)(i.CheckCircle,{className:"h-3 w-3"}):(0,b.jsx)(j.XCircle,{className:"h-3 w-3"}),a.successRate.toFixed(0),"%"]})})]},a.model))})]})})}function w({contractors:a}){if(0===a.length)return(0,b.jsx)("div",{className:"flex h-32 items-center justify-center text-zinc-500 font-mono",children:"No contractor cost data available"});let c=Math.max(...a.map(a=>a.totalCost));return(0,b.jsx)("div",{className:"space-y-2",children:a.map((a,d)=>{let e=c>0?a.totalCost/c*100:0;return(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"absolute inset-y-0 left-0 bg-amber-500/10 rounded",style:{width:`${e}%`}}),(0,b.jsxs)("div",{className:"relative flex items-center gap-3 px-3 py-2",children:[(0,b.jsxs)("span",{className:"text-xs font-mono text-zinc-600 w-5",children:[d+1,"."]}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)(m.default,{href:`/contractors/${a.contractor_id}`,className:"text-sm font-medium text-zinc-200 hover:text-cyan-400 transition-colors truncate block",children:a.business_name}),(0,b.jsxs)("p",{className:"text-xs text-zinc-500 font-mono",children:[a.city&&a.state?`${a.city}, ${a.state}`:a.city||a.state||"Unknown"," Â· ",a.totalOperations," ops"]})]}),(0,b.jsxs)("div",{className:"text-right shrink-0",children:[(0,b.jsx)("p",{className:"text-sm font-bold text-zinc-100 font-mono",children:q(a.totalCost)}),(0,b.jsxs)("p",{className:"text-xs text-zinc-500 font-mono",children:[r(a.totalTokens)," tokens"]})]})]})]},a.contractor_id)})})}function x({avgCostPerOp:a}){return(0,b.jsx)("div",{className:"space-y-3",children:[{contractors:100,ops:200},{contractors:500,ops:1e3},{contractors:1e3,ops:2e3}].map(({contractors:c,ops:d})=>(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-lg bg-zinc-800/50 border border-zinc-700/50 px-4 py-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-sm font-medium text-zinc-200",children:[c.toLocaleString()," contractors"]}),(0,b.jsxs)("p",{className:"text-xs text-zinc-500 font-mono",children:[d.toLocaleString()," operations"]})]}),(0,b.jsx)("p",{className:"text-lg font-bold text-amber-400 font-mono",children:q(a*d)})]},c))})}async function y(){let[a,g,i,j]=await Promise.all([(0,n.getAIUsageStats)(),(0,n.getDailyCostTrend)(30),(0,n.getModelStats)(),(0,n.getTopContractorsByCost)(10)]),m=new Date;m.setDate(m.getDate()-7);let y=g.filter(a=>new Date(a.date)>=m),z=y.reduce((a,b)=>a+b.cost,0),A=y.reduce((a,b)=>a+b.tokens,0);return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(o.PageHeader,{title:"Cost Dashboard",subtitle:"Monitor AI API spending and token usage across all operations",icon:c.DollarSign,badge:"Billing",badgeColor:"amber",tableName:"ai_usage_log"}),(0,b.jsxs)(p.StatBlockGrid,{columns:4,children:[(0,b.jsx)(p.StatBlock,{label:"Total Spend",value:q(a.totalCost),icon:c.DollarSign,color:"amber",subtitle:"All time"}),(0,b.jsx)(p.StatBlock,{label:"Last 7 Days",value:q(z),icon:e.TrendingUp,color:"cyan",subtitle:`${r(A)} tokens`}),(0,b.jsx)(p.StatBlock,{label:"Total Tokens",value:r(a.totalTokens),icon:d.Zap,color:"violet",subtitle:`${a.totalOperations.toLocaleString()} operations`}),(0,b.jsx)(p.StatBlock,{label:"Success Rate",value:`${a.successRate.toFixed(1)}%`,icon:f.Activity,color:"emerald",subtitle:`Avg ${q(a.avgCostPerOperation)}/op`})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[(0,b.jsxs)("div",{className:"bg-zinc-900/30 border border-zinc-800/50 rounded-lg p-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)("div",{className:"h-2 w-2 rounded-full bg-cyan-400 animate-pulse"}),(0,b.jsx)("span",{className:"text-xs font-mono uppercase tracking-wider text-zinc-500",children:"By Operation"})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(s,{operation:"analyze",count:a.byOperation.analyze.count,tokens:a.byOperation.analyze.tokens,cost:a.byOperation.analyze.cost,color:"bg-cyan-500"}),(0,b.jsx)(s,{operation:"generate",count:a.byOperation.generate.count,tokens:a.byOperation.generate.tokens,cost:a.byOperation.generate.cost,color:"bg-violet-500"}),(0,b.jsx)(s,{operation:"discover",count:a.byOperation.discover.count,tokens:a.byOperation.discover.tokens,cost:a.byOperation.discover.cost,color:"bg-emerald-500"})]})]}),(0,b.jsxs)("div",{className:"lg:col-span-2 bg-zinc-900/30 border border-zinc-800/50 rounded-lg p-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)("div",{className:"h-2 w-2 rounded-full bg-amber-400"}),(0,b.jsx)("span",{className:"text-xs font-mono uppercase tracking-wider text-zinc-500",children:"Daily Spending (Last 30 Days)"})]}),(0,b.jsx)(u,{data:g}),g.length>0&&(0,b.jsxs)("div",{className:"mt-4 flex items-center justify-between text-xs text-zinc-600 font-mono",children:[(0,b.jsx)("span",{children:new Date(g[0].date).toLocaleDateString()}),(0,b.jsx)("span",{children:new Date(g[g.length-1].date).toLocaleDateString()})]})]})]}),(0,b.jsxs)("div",{className:"bg-zinc-900/30 border border-zinc-800/50 rounded-lg p-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)(k,{className:"h-4 w-4 text-zinc-500"}),(0,b.jsx)("span",{className:"text-xs font-mono uppercase tracking-wider text-zinc-500",children:"Token Distribution (Input vs Output)"})]}),(0,b.jsx)(t,{totalInputTokens:a.totalInputTokens,totalOutputTokens:a.totalOutputTokens,byOperation:a.byOperation})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[(0,b.jsxs)("div",{className:"bg-zinc-900/30 border border-zinc-800/50 rounded-lg p-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)(h,{className:"h-4 w-4 text-zinc-500"}),(0,b.jsx)("span",{className:"text-xs font-mono uppercase tracking-wider text-zinc-500",children:"Model Performance"})]}),(0,b.jsx)(v,{models:i})]}),(0,b.jsxs)("div",{className:"bg-zinc-900/30 border border-zinc-800/50 rounded-lg p-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)(l.Users,{className:"h-4 w-4 text-zinc-500"}),(0,b.jsx)("span",{className:"text-xs font-mono uppercase tracking-wider text-zinc-500",children:"Top 10 by Cost"})]}),(0,b.jsx)(w,{contractors:j})]}),(0,b.jsxs)("div",{className:"bg-zinc-900/30 border border-zinc-800/50 rounded-lg p-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)(c.DollarSign,{className:"h-4 w-4 text-zinc-500"}),(0,b.jsx)("span",{className:"text-xs font-mono uppercase tracking-wider text-zinc-500",children:"Cost Projections"})]}),(0,b.jsxs)("p",{className:"mb-4 text-sm text-zinc-500",children:["Estimated costs based on current average of ",q(a.avgCostPerOperation)," per operation"]}),(0,b.jsx)(x,{avgCostPerOp:a.avgCostPerOperation})]})]}),0===a.totalOperations&&(0,b.jsxs)("div",{className:"bg-zinc-900/30 border border-zinc-800/50 rounded-lg p-12 text-center",children:[(0,b.jsx)("div",{className:"inline-flex items-center justify-center h-16 w-16 rounded-full bg-zinc-800/50 border border-zinc-700/50 mb-4",children:(0,b.jsx)(c.DollarSign,{className:"h-8 w-8 text-zinc-600"})}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-zinc-300 mb-1",children:"No cost data yet"}),(0,b.jsx)("p",{className:"text-sm text-zinc-500 max-w-md mx-auto",children:"Cost tracking will appear here once you run the agent's analyze or generate scripts."}),(0,b.jsxs)("p",{className:"mt-4 text-xs font-mono text-zinc-600",children:["Table: ",(0,b.jsx)("code",{className:"px-1.5 py-0.5 bg-zinc-800/50 rounded",children:"ai_usage_log"})]})]})]})}a.s(["default",()=>y],44211)}];

//# sourceMappingURL=src_app_costs_page_tsx_9f2a52cd._.js.map